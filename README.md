# ffmpeg_cam

### Необходимые зависимости:

``ffmpeg, make, bash, git``

### Процесс установки:

#### 1. Клонируем репозиторий

```
git clone https://github.com/codesshaman/ffmpeg_cam.git
```

#### 2. Переходим в директорию установки

```
cd ffmpeg_cam
```

#### 3. Подключаем камеры и проверяем путь к устройствам

```
ls /dev/ | grep video
```

#### 4. Задаём правильные права на исполняемые файлы

```
chmod a+x *.sh
```

#### 5. Подключаем диск и проверяем запись скриптами

```
./capture_dev0.sh
```

```
./capture_dev1.sh
```

Если есть ошибки, внести правки в раздел

``DEV_1="/dev/video1"``

выбрав устройство с предыдущего шага. Перезапустить.

#### 6. Перемещаем исполняемые файлы в директорию из $PATH

``echo $PATH`` - если нужно убедиться что директория есть в $PATH

```
sudo cp *.sh /usr/local/bin
```

#### 7. Создаём и вызываем демонов для автозапуска сервисов

```
make
```

#### 8. Опционально. Смотрим логи

Чтобы посмотреть логи запущенного приложения вводим

```
sudo journalctl -u ffmpeg_capture_0.service
```

и

```
sudo journalctl -u ffmpeg_capture_1.service
```

#### 9. Опционально. Удаляем директорию исходников

Чтобы удалить директорию исходников используем

```
cd .. && rm -rf ffmpeg_cam
```
